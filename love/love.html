<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="love.css" />
  <title>Document</title>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />
</head>
<body>
  <div class="wrapper">
    <!-- KHU V·ª∞C GIAO DI·ªÜN CH√çNH -->
    <div class="formInput">
      <div class="boxHands">
        <div class="handsCat">
          <img src="../image/handsCat.png" alt="" />
        </div>
        <h1>Happy 1-month anniversary</h1>
      </div>

      <div class="boxSlider">
        <div class="listSlider">
          <div class="slider">
            <img src="../image/slowly1.png" alt="" />
          </div>
          <div class="slider">
            <img src="../image/slowly2.png" alt="" />
          </div>
          <div class="slider">
            <img src="../image/slowly3.png" alt="" />
          </div>
          <div class="slider">
            <img src="../image/slowly4.png" alt="" />
          </div>
          <div class="slider">
            <img src="../image/slowly5.png" alt="" />
          </div>
          <div class="slider">
            <img src="../image/slowly6.png" alt="" />
          </div>
          <div class="slider">
            <img src="../image/slowly7.png" alt="" />
          </div>
        </div>
        <div class="left">
          <i class="fa-solid fa-chevron-left"></i>
        </div>
        <div class="right">
          <i class="fa-solid fa-chevron-right"></i>
        </div>
      </div>

      <div class="boxHandsInput">
        <div class="handsCatImgInput">
          <img src="../image/handsCat.png" alt="" />
        </div>
        <input type="text" id="inputField" placeholder="Nh·∫≠p t√™n..." readonly />
      </div>

      <div class="buttonLove">
        <div class="cricleBtn"></div>
        <div class="button"></div>
      </div>
    </div>

    <div class="boxLine">
      <div class="boxCar">
        <img src="../image/car.gif" alt="" />
      </div>
      <div class="boxHeart">
        <div class="heart1"></div>
        <div class="heart2"></div>
        <div class="heart3"></div>
        <div class="heart4"></div>
        <div class="heart5"></div>
        <div class="heart6"></div>
      </div>
      <div class="ground-line">
        <div>
          <span class="line1"></span>
          <span class="line2"></span>
          <span class="line3"></span>
          <span class="line4"></span>
          <span class="line5"></span>
          <span class="line1"></span>
          <span class="line2"></span>
          <span class="line3"></span>
          <span class="line4"></span>
          <span class="line5"></span>
        </div>
      </div>
    </div>
  </div>

  <!-- LOADING -->
  <div class="loadingLove">
    <div class="rhombus">
      <div class="circle1"></div>
      <div class="circle2"></div>
    </div>
  </div>

  <!-- FORM NH·∫¨N TH∆Ø (HI·ªÜN RA KHI CLICK V√ÄO L√Å TH∆Ø) -->
  <div class="wrapperLetterForm">
    <div class="boxLetter">
      <i class="fa-solid fa-xmark"></i>
      <div class="formLetter">
        <div class="heartLetter">
          <div class="heartLetterItem"></div>
        </div>
        <div class="heartLetter">
          <div class="heartLetterItem"></div>
        </div>
        
        <div class="wrapperLetter">
          <div class="giftbox">
            <div class="img">
              <img src="../image/giftbox.png" alt="" />
            </div>
          </div>
          <div class="textLetter">
            <h2></h2>
            <p class="contentLetter"></p>
            <div class="heartAnimation">
              <img src="../image/heartAnimation.gif" alt="" />
            </div>
          </div>
          <div class="mewmew1">
            <img src="../image/mewmew.gif" alt="" />
          </div>
          <div class="mewmew2">
            <img src="../image/mewmew.gif" alt="" />
          </div>
        </div>
      </div>
      <div class="before"></div>
    </div>
  </div>

  <!-- MODAL XEM ·∫¢NH -->
  <div id="imageModal" class="modal">
    <span class="close">&times;</span>
    <img class="modal-content" id="modalImg" />
    
    <!-- N√∫t chuy·ªÉn slide b√™n tr√°i -->
    <div class="left" onclick="prevSlide(); event.stopPropagation();">
      <i class="fa-solid fa-chevron-left"></i>
    </div>
    
    <!-- N√∫t chuy·ªÉn slide b√™n ph·∫£i -->
    <div class="right" onclick="nextSlide(); event.stopPropagation();">
      <i class="fa-solid fa-chevron-right"></i>
    </div>
  </div>

  <!-- CUSTOM ALERT MODAL (thay th·∫ø cho alert) -->
  <div id="customAlert" class="custom-alert">
    <div class="custom-alert-content">
      <span class="close-alert">&times;</span>
      <p>Nguy·ªÖn Do√£n Huy Th√¥ng B√°o:</p>
      <br>
      <p>Click v√†o th∆∞ chu·∫©n b·ªã r∆°i xu·ªëng nha!</p>
      <button id="btnCustomAlertOK">OK</button>
    </div>
  </div>

  <!-- SCRIPT -->
  <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
  <script>
    $(window).on("load", function () {
      $("body").removeClass("preloading");
      $(".loadingLove").delay(1000).fadeOut("fast");

      // Hi·ªáu ·ª©ng tr√°i tim di chu·ªôt
      function getHeart(e) {
        let ele = document.createElement("div");
        ele.className = "element";
        document.querySelector("body").prepend(ele);
        ele.style.left = e.clientX + "px";
        ele.style.top = e.clientY - 10 + "px";
        setTimeout(() => {
          let text = document.querySelectorAll(".element")[0],
            directionX = Math.random() < 0.5 ? -1 : 1,
            directionY = Math.random() < 0.5 ? -1 : 1;

          text.style.left =
            parseInt(text.style.left) - directionX * (Math.random() * 100) + "px";
          text.style.top =
            parseInt(text.style.top) - directionY * (Math.random() * 100) + "px";
          text.style.opacity = 0;
          text.style.transform = "scale(0.4)";
          text.innerHTML = "üíó";
          text.style.zIndex = "100";

          setTimeout(() => {
            ele.remove();
          }, 1000);
        }, 10);
      }
      document.onmousemove = function (e) {
        getHeart(e);
      };
      document.onclick = function (e) {
        let ele = document.createElement("div");
        ele.className = "heartRain";
        document.querySelector("body").prepend(ele);
        ele.style.left = e.clientX - 10 + "px";
        ele.style.top = e.clientY - 10 + "px";
        ele.innerHTML = "üíó";
        setTimeout(() => {
          ele.style.top = "calc(85% - 25px)";
        }, 100);
        setTimeout(() => {
          ele.style.opacity = 0;
        }, 3000);
        setTimeout(() => {
          ele.remove();
        }, 4000);
      };
      document.onmousedown = (e) => {
        getHeart(e);
      };

      // G√µ t√™n
      const inputField = document.getElementById("inputField");
      const textToType = "NGUY·ªÑN TH·ªä HI·ªÄN MAI"; // thay ƒë·ªïi t√™n
      const typingSpeed = 100; // ms per character

      let charIndex = 0;
      function typeText() {
        if (charIndex < textToType.length) {
          inputField.value += textToType.charAt(charIndex);
          charIndex++;
          setTimeout(typeText, typingSpeed);
        }
        if (inputField.value.length == textToType.length) {
          setTimeout(() => {
            document.querySelector(".buttonLove").style.transform = "translateY(0%)";
            document.querySelector(".cricleBtn").style.transform = "scale(0.1)";
          }, 1000);
          setTimeout(() => {
            document.querySelector(".cricleBtn").style.transform = "scale(1)";
            document.querySelector(".cricleBtn").innerHTML = "üíó";
          }, 2000);
          setTimeout(() => {
            document.querySelector(".buttonLove").style.width = "144px";
            document.querySelector(".button").style.transform = "translateX(25px)";
          }, 2500);
          setTimeout(() => {
            document.querySelector(".button").style.width = "calc(100% - 25px)";
            document.querySelector(".button").style.height = "10px";
          }, 3000);
          setTimeout(() => {
            document.querySelector(".button").style.height = "30px";
          }, 3500);
          setTimeout(() => {
            let buttonNode = document.querySelector(".button");
            buttonNode.innerHTML = "Nh·∫≠n th∆∞";
            buttonNode.style.fontSize = "18px";
          }, 4000);
        }
      }
      // B·∫Øt ƒë·∫ßu g√µ sau 11.5s
      setTimeout(() => {
        typeText();
      }, 11500);
    });

    // G√µ ti√™u ƒë·ªÅ th∆∞
    let indexText = 0;
    let textLetter = document.querySelector(".textLetter h2");
    const textLetterH2 = "G·ª≠i Mai!";
    let timoutTextLetter;

    function textCharLetter() {
      if (indexText < textLetterH2.length) {
        textLetter.textContent += textLetterH2[indexText];
        indexText++;
        setTimeout(textCharLetter, 100);
      } else {
        clearInterval(timoutTextLetter);
        setTimeout(() => {
          funcTimeoutLetterContent();
        }, 500);
      }
    }
    function funcTimeoutLetter() {
      indexText = 0; // Reset
      textLetter.textContent = "";
      clearInterval(timoutTextLetter);
      timoutTextLetter = setInterval(textCharLetter, 200);
    }

    // G√µ n·ªôi dung th∆∞
    let indexTextContent = 0;
    let textLetterContent = document.querySelector(".contentLetter");
    const textLetterP =
      "v·∫≠y l√† ƒë√£ ƒë∆∞·ª£c 1 th√°ng k·ªÉ t·ª´ ng√†y ƒë·∫ßu ti√™n t·ª•i m√¨nh trao ƒë·ªïi th∆∞ qua slowly nh·ªâ, th·ªùi gian tr√¥i qua nhanh th·∫≠t ƒë√≥. T·ªõ r·∫•t bi·∫øt ∆°n v√¨ nh·ªØng ƒëi·ªÅu c·∫≠u chia s·∫ª, nh·ªØng l·ªùi khuy√™n v√† s·ª± tin t∆∞·ªüng m√† c·∫≠u trao ƒë·∫øn t·ªõ. Mong r·∫±ng t·ª•i m√¨nh c√≥ th·ªÉ g·ª≠i th∆∞ th√™m m·ªôt th·ªùi gian n·ªØa, kh√¥ng ai bi·∫øt m√£i m√£i l√† bao l√¢u, nh∆∞ng d√π c√≥ ph·∫£i d·ª´ng l·∫°i th√¨ h√£y bi·∫øn n√≥ th√†nh 1 c√°i k·∫øt c√≥ h·∫≠u nha! Ch√∫c Mai c√≥ m·ªôt ng√†y cu·ªëi tu·∫ßn vui v·∫ª nh√© üçÄüçÄüçÄ!";
    let timoutTextLetterContent;
    function textCharLetterContent() {
      if (indexTextContent < textLetterP.length) {
        textLetterContent.textContent += textLetterP[indexTextContent];
        indexTextContent++;
        // TƒÉng delay t·ª´ 100ms l√™n 200ms
        setTimeout(textCharLetterContent, 5000);
      } else {
        clearInterval(timoutTextLetterContent);
      }
    }
    function funcTimeoutLetterContent() {
      indexTextContent = 0;
      textLetterContent.textContent = "";
      clearInterval(timoutTextLetterContent);
      timoutTextLetterContent = setInterval(textCharLetterContent, 200);
    }

    // Slider ·∫£nh nh·ªè
    document.querySelector(".boxSlider .right").addEventListener("click", function () {
      var slider = document.querySelectorAll(".slider");
      document.querySelector(".listSlider").appendChild(slider[0]);
    });
    document.querySelector(".boxSlider .left").addEventListener("click", function () {
      var slider = document.querySelectorAll(".slider");
      document.querySelector(".listSlider").prepend(slider[slider.length - 1]);
    });

    // ===== THAY TH·∫æ ALERT B·∫∞NG CUSTOM ALERT =====
    // Khi click v√†o .buttonLove => hi·ªán custom alert thay v√¨ alert()
    document.querySelector(".buttonLove").addEventListener("click", function () {
      document.getElementById("customAlert").style.display = "block";
    });

    // N√∫t X tr√™n custom alert
    document.querySelector(".close-alert").addEventListener("click", function() {
      document.getElementById("customAlert").style.display = "none";
    });

    // N√∫t OK tr√™n custom alert
    document.getElementById("btnCustomAlertOK").addEventListener("click", function() {
      document.getElementById("customAlert").style.display = "none";
      // B·∫Øt ƒë·∫ßu th·∫£ th∆∞
      startLetterFalling();
    });

    // H√†m th·∫£ th∆∞ (t√°ch ri√™ng)
    function startLetterFalling() {
      let timeout = setInterval(() => {
        var letters = document.createElement("div");
        letters.className = "letters";
        letters.innerHTML = '<img src="../image/letters.png" alt="">';
        document.querySelector("body").prepend(letters);
        let left = Math.floor(Math.random() * 100);
        let rotate = Math.floor(Math.random() * 360);
        letters.style.left = left + "%";
        letters.style.top = "-10%";
        letters.style.transform = `rotate(${rotate}deg)`;
        setTimeout(() => {
          letters.style.top = "100%";
        }, 1000);
        setTimeout(() => {
          letters.remove();
        }, 11000);

        // Khi click v√†o l√° th∆∞
        document.querySelectorAll(".letters").forEach((item) => {
          item.addEventListener("click", function () {
            clearInterval(timeout);
            $(".wrapperLetterForm").fadeIn();
            // G·ªçi h√†m g√µ ti√™u ƒë·ªÅ th∆∞
            funcTimeoutLetter();
          });
        });
      }, 500);
    }

    // Modal xem ·∫£nh l·ªõn
    $(document).ready(function () {
      $(".slider img").click(function () {
        let src = $(this).attr("src");
        $("#modalImg").attr("src", src);
        $("#imageModal").fadeIn();
      });

      // Ch·ªâ ƒë√≥ng modal khi click n√∫t close ho·∫∑c n·ªÅn
      $(".close").click(function () {
        $("#imageModal").fadeOut();
      });
      $("#imageModal").click(function (e) {
        if (e.target === this) {
          $(this).fadeOut();
        }
      });

      // Danh s√°ch ·∫£nh
      const images = [
        "../image/slowly1.png",
        "../image/slowly2.png",
        "../image/slowly3.png",
        "../image/slowly4.png",
        "../image/slowly5.png",
        "../image/slowly6.png",
        "../image/slowly7.png",
      ];
      let currentIndex = 0;
      const modalImg = document.getElementById("modalImg");

      function showImage(index) {
        if (index < 0) {
          index = images.length - 1;
        } else if (index >= images.length) {
          index = 0;
        }
        currentIndex = index;
        modalImg.src = images[currentIndex];
      }

      window.prevSlide = function () {
        showImage(currentIndex - 1);
      };
      window.nextSlide = function () {
        showImage(currentIndex + 1);
      };
    });

    // N√∫t ƒë√≥ng form th∆∞
    document.querySelector(".fa-xmark").addEventListener("click", function () {
      indexTextContent = 0;
      textLetterContent.textContent = "";
      clearInterval(timoutTextLetterContent);
      $(".wrapperLetterForm").fadeOut();
    });
  </script>
</body>
</html>
